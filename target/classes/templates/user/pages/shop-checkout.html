<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <title>FreshCart - eCommerce HTML Template</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
          content="FreshCart is a beautiful eCommerce HTML template specially designed for multipurpose shops & online stores selling products. Most Loved by Developers to build a store website easily.">
    <meta content="Codescandy" name="author"/>


    <!-- Favicon icon-->
    <link rel="shortcut icon" type="image/x-icon" href="/public/user/images/favicon/favicon.ico">


    <!-- Libs CSS -->
    <link href="/public/user/libs/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="/public/user/libs/feather-webfont/dist/feather-icons.css" rel="stylesheet"/>
    <link href="/public/user/libs/slick-carousel/slick/slick.css" rel="stylesheet"/>
    <link href="/public/user/libs/slick-carousel/slick/slick-theme.css" rel="stylesheet"/>
    <link href="/public/user/libs/simplebar/dist/simplebar.min.css" rel="stylesheet"/>
    <link href="/public/user/libs/nouislider/dist/nouislider.min.css" rel="stylesheet">
    <link href="/public/user/libs/tiny-slider/dist/tiny-slider.css" rel="stylesheet">
    <link href="/public/user/libs/dropzone/dist/min/dropzone.min.css" rel="stylesheet"/>
    <link href="/public/user/libs/prismjs/themes/prism-okaidia.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link rel="stylesheet" href="/public/user/css/theme.min.css">
</head>

<body>

<!-- navigation -->
<header th:replace="~{/user/fragments/header :: large-header}"></header>
<!-- End Header -->
<nav th:replace="~{/user/fragments/navbar :: navbar}"></nav>
<!-- End Navigation -->

<main>
    <!-- section-->
    <div class="mt-4">
        <div class="container">
            <!-- row -->
            <div class="row ">
                <!-- col -->
                <div class="col-12">
                    <!-- breadcrumb -->
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item"><a href="#!">Home</a></li>
                            <li class="breadcrumb-item"><a href="#!">Shop</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Shop Checkout</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- section -->
    <section class="mb-lg-14 mb-8 mt-8">
        <div class="container">
            <!-- row -->
            <div class="row">
                <!-- col -->
                <div class="col-12">
                    <div>
                        <div class="mb-8">
                            <!-- text -->
                            <h1 class="fw-bold mb-0">Checkout</h1>
                            <p class="mb-0">Already have an account? Click here to <a href="#!">Sign in</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <!-- row -->
                <div class="row">

                    <div class="col-12">
                        <div class="mt-4 mt-lg-0">
                            <div class="card shadow-sm">
                                <h5 class="px-6 py-4 bg-transparent mb-0">Order Details</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item px-4 py-3">
                                        <div class="row">
                                            <div class="col-5">Products</div>
                                            <div class="col-3 text-center">Price</div>
                                            <div class="col-1">Quantity</div>
                                            <div class="col-3 text-end">Total</div>
                                        </div>
                                    </li>
                                    <!-- list group item -->
                                    <li th:each="item : ${cartItems}"
                                        th:attr="data-cart-id=${item.id}"
                                        class="list-group-item px-4 py-3">
                                        <div class="row align-items-center">
                                            <div class="col-1">
                                                <img th:src="${item.product.poster}"
                                                     width="80" height="80"
                                                     alt="Ecommerce" class="img-fluid"></div>
                                            <div class="col-4">
                                                <h6 class="mb-0" th:text="${item.product.name}"></h6>
                                                <!--                                                <span><small class="text-muted">.98 / lb</small></span>-->
                                            </div>
                                            <div class="col-3 text-center text-muted text-start">
                                                <span th:attr="data-money=${item.product.salePrice}"></span>
                                            </div>
                                            <div class="col-1 text-center text-muted">
                                                <span th:text="${item.quantity}"></span>
                                            </div>
                                            <div class="col-3 text-lg-end text-start text-md-end col-md-3">
                                                <span class="fw-bold" th:attr="data-money=${item.total}"></span>
                                            </div>
                                        </div>
                                    </li>

                                    <!-- list group item -->
                                    <li class="list-group-item px-4 py-3">
                                        <div class="d-flex align-items-center justify-content-between mb-1">
                                            <div>
                                                Item Subtotal
                                            </div>
                                            <div class="fw-bold"
                                                 id="itemSubtotal"
                                                 th:attr="data-money=${totalPrice}"></div>

                                        </div>
                                        <input type="hidden" id="voucherCode" th:value="${voucherCode}">
                                        <div class="d-flex align-items-center justify-content-between mb-1 ">
                                            <div>
                                                Discount
                                                <i class="feather-icon icon-info text-muted"
                                                   data-bs-toggle="tooltip"
                                                   title="Discount from voucher"></i>
                                            </div>
                                            <div>
                                                -
                                                <span class="fw-bold"
                                                      id="discount"
                                                      th:attr="data-money=${discount}">
                                                </span>
                                            </div>

                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mb-1 ">
                                            <div>
                                                Shipping Fee
                                                <i class="feather-icon icon-info text-muted"
                                                   data-bs-toggle="tooltip"
                                                   title="Discount from voucher"></i>
                                            </div>
                                            <div>
                                                <span class="fw-bold" id="shipping-fee" data-money="0">
                                                </span>
                                            </div>

                                        </div>

                                    </li>
                                    <!-- list group item -->
                                    <li class="list-group-item px-4 py-3">
                                        <div class="d-flex align-items-center justify-content-between fw-bold">
                                            <div>
                                                Subtotal
                                            </div>
                                            <div
                                                    id="subtotal"
                                                    th:attr="data-money=${totalPriceAfterDiscount}"></div>

                                        </div>


                                    </li>
                                </ul>

                            </div>


                        </div>
                    </div>

                    <div class="col-12">
                        <!-- accordion -->
                        <div class="accordion accordion-flush" id="accordionFlushExample">
                            <!-- accordion item -->
                            <div class="accordion-item py-4">

                                <div class="d-flex justify-content-between align-items-center">
                                    <!-- heading one -->
                                    <a href="#" class="fs-5 text-inherit collapsed h4" data-bs-toggle="collapse"
                                       data-bs-target="#flush-collapseOne" aria-expanded="true"
                                       aria-controls="flush-collapseOne">
                                        <i class="feather-icon icon-map-pin me-2 text-muted"></i>Add delivery address
                                    </a>
                                    <!-- btn -->
                                    <a href="#" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal"
                                       data-bs-target="#addAddressModal">Add a new address </a>
                                    <!-- collapse -->
                                </div>
                                <div id="flush-collapseOne" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionFlushExample">
                                    <div class="mt-5">
                                        <div class="row justify-content-around">
                                            <!-- form -->
                                            <div class="border p-3 px-6 rounded-3 col-lg-5 col-12 mb-3"
                                                 th:each="address : ${user.addresses}"
                                                 th:attr="data-address-id=${address.id}"
                                                 th:for="${address.id}"
                                            >
                                                <div class="form-check d-flex justify-content-between">
                                                    <div>
                                                            <span class="form-check-label fs-6 fw-bolder">
                                                                <span th:text="${address.receiverName}"></span>
                                                            </span>
                                                    </div>
                                                    <div class="action">
                                                        <button class="btn btn-outline-primary border-0 p-1 px-2">
                                                            <i class=" feather-icon icon-edit-2"></i>
                                                        </button>
                                                        <button
                                                                class="btn btn-outline-danger border-0 p-1 px-2"
                                                                th:attr="data-address-id=${address.id}"
                                                        >
                                                            <i class="feather-icon icon-trash-2"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <!-- address -->

                                                <div class="mb-2">
                                                    <i class="bi bi-telephone fs-4 me-2"></i>
                                                    <span class="fw-bolder"
                                                          th:text="${address.receiverPhone}"></span>
                                                </div>
                                                <div>
                                                    <i class="bi bi-geo-fill fs-4 me-2"></i>
                                                    <span th:text="${address.fullAddress}"></span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- accordion item -->
                            <div class="accordion-item py-4">

                                <a href="#" class="text-inherit h5" data-bs-toggle="collapse"
                                   data-bs-target="#flush-collapseTwo" aria-expanded="false"
                                   aria-controls="flush-collapseTwo">
                                    <i class="feather-icon icon-credit-card me-2 text-muted"></i>
                                    Payment method
                                    <!-- collapse --> </a>
                                <div id="flush-collapseTwo" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionFlushExample">

                                    <div class="mt-5">
                                        <div class="row justify-content-center">
                                            <div

                                                    th:each="item : ${paymentMethods}"
                                                    class="col-lg-6 col-12">
                                                <div class="card h-100"
                                                     th:attr="data-payment-method-name=${item.name()}">
                                                    <div class="card-body d-flex justify-content-start align-items-center">
                                                        <img class="me-3"
                                                             width="50"
                                                             th:src="${item.image}" alt="Payment">
                                                        <div>
                                                            <h5 class="title" th:text="${item.name}">

                                                            </h5>
                                                            <span th:text="${item.description}"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- accordion item -->
                            <div class="accordion-item py-4">

                                <a href="#" class="text-inherit h5" data-bs-toggle="collapse"
                                   data-bs-target="#flush-collapseThree" aria-expanded="false"
                                   aria-controls="flush-collapseThree">
                                    <i class="feather-icon icon-shopping-bag me-2 text-muted"></i>Delivery instructions
                                    <!-- collapse --> </a>
                                <div id="flush-collapseThree" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionFlushExample">

                                    <div class="mt-5">
                                        <textarea class="form-control" id="note" rows="3"
                                                  placeholder="Write delivery instructions "></textarea>
                                        <p class="form-text">Add instructions for how you want your order shopped and/or
                                            delivered</p>
                                        <div class="mt-5 d-flex justify-content-end">
                                            <a href="#" class="btn btn-outline-gray-400 text-muted"
                                               data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo"
                                               aria-expanded="false"
                                               aria-controls="flush-collapseTwo">Back to cart</a>
                                            <button class="btn btn-primary ms-2" id="completeOrder">Complete Order
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>


                </div>
            </div>


        </div>


    </section>
</main>


<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Delete address</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6>Are you sure you want to delete this address?</h6>
                <p class="mb-6">Jitu Chauhan<br>

                    4450 North Avenue Oakland, <br>

                    Nebraska, United States,<br>

                    402-776-1106</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-gray-400" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="addAddressModal" tabindex="-1" aria-labelledby="addAddressModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- modal body -->
            <div class="modal-body p-6">
                <div class="d-flex justify-content-between mb-5">
                    <!-- heading -->
                    <div>
                        <h5 class="h6 mb-1" id="addAddressModalLabel">New Shipping Address</h5>
                        <p class="small mb-0">Add new shipping address for your order delivery.</p>
                    </div>
                    <div>
                        <!-- button -->
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                </div>
                <!-- row -->
                <div id="addressForm" class="row g-3">
                    <!-- col -->
                    <div class="col-12">
                        <input name="receiverName" type="text" class="form-control" placeholder="Fullname"
                               required="">
                    </div>
                    <!-- col -->
                    <div class="col-12">
                        <input name="receiverPhone" type="text" class="form-control" placeholder="Phone number"
                               required="">
                    </div>
                    <div class="col-12">
                        <select name="province" class="form-select" aria-label="Default select example" id="province">
                            <option selected>-- Select province --</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <select name="district" class="form-select" id="district">
                            <option selected="">-- Select district --</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <select name="commune" class="form-select" aria-label="Default select example" id="ward">
                            <option selected="">-- Select ward --</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <input name="detail" type="text" class="form-control" placeholder="Detail address"
                               required="">
                    </div>

                    <!-- button -->
                    <div class="col-12 text-end">
                        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
                        <button id="saveAddress" class="btn btn-primary" data-bs-dismiss="modal" type="button">Save
                            Address
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<!-- Footer -->
<footer th:replace="~{/user/fragments/footer :: footer}"></footer>
<!-- Javascript-->
<!-- Libs JS -->
<script src="/public/user/libs/jquery/dist/jquery.min.js"></script>
<script src="/public/user/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="/public/user/libs/jquery-countdown/dist/jquery.countdown.min.js"></script>
<script src="/public/user/libs/slick-carousel/slick/slick.min.js"></script>
<script src="/public/user/libs/simplebar/dist/simplebar.min.js"></script>
<script src="/public/user/libs/nouislider/dist/nouislider.min.js"></script>
<script src="/public/user/libs/wnumb/wNumb.min.js"></script>
<script src="/public/user/libs/rater-js/index.js"></script>
<script src="/public/user/libs/prismjs/prism.js"></script>
<script src="/public/user/libs/prismjs/components/prism-scss.min.js"></script>
<script src="/public/user/libs/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="/public/user/libs/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script src="/public/user/libs/tiny-slider/dist/min/tiny-slider.js"></script>
<script src="/public/user/libs/dropzone/dist/min/dropzone.min.js"></script>
<script src="/public/user/libs/flatpickr/dist/flatpickr.min.js"></script>
<script src="/public/user/libs/inputmask/dist/jquery.inputmask.min.js"></script>
<!-- Theme JS -->
<script src="/public/user/js/theme.min.js"></script>
<script src="/public/user/js/custom/required.js"></script>
<script src="/public/user/js/custom/clickHandler.js"></script>
<script src="/public/user/js/custom/money-formatter.js"></script>
<script src="/public/user/js/custom/checkout.js"></script>

<!-- choose one -->
<div th:replace="~{/user/fragments/notification :: full-container}"></div>

</body>

</html>